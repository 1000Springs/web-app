{% extends "layout.html" %}
{% block title %}Home{% endblock %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='galleriffic-2.css')}}" type="text/css" />

  {{ super() }}

<script type="text/javascript" src="{{ url_for('static', filename='js/jquery.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/jquery.galleriffic.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/jquery.opacityrollover.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/maps.js') }}"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>


<script type="text/javascript">
	
	


	window.onload=function()
	{
	initalizeSampleSite();
	var markerPosition = new  google.maps.LatLng({{sample_site.eastings}},{{sample_site.northings}});
	addNewMarker(markerPosition,"http://maps.google.com/mapfiles/ms/icons/red-dot.png");
	$('i').tooltip();

	/*
		Gives focus to username textbox.
		The timeout is because the model window needs time to load so without it, the focus would be set to nothing
	*/
	$('#loginButton').click(function() {

		window.setTimeout(function() {
			$('#usernameTextbox').focus();
		}, 700, true);
		 

	});

	};
	

	</script>





{% endblock %}
{% block content %}


	<div class="row-fluid contrast" style="height:73px;position:relative;background-color:rgba(29,155,171,0.5);padding-left:15px">
		
		<h2>{{sample_site.feature_name}}</h2>	
		<!-- <p class="muted">Sample Site {{sample_site.location_id}}</p> -->	
		

		
	</div>

	<div style="height:5px;position:relative;background-color:rgb(255,255,255)"></div>

<div class="row-fluid" style="position:relative;">
	<div class="span12" style="background:#fff">



				<!-- Start Advanced Gallery Html Containers -->
				<div class="span6">
				<div id="gallery" class="content">
					
					<div class="slideshow-container">
						<div id="loading" class="loader"></div>
						<div id="slideshow" class="slideshow"></div>
					</div>
					<div id="caption" class="caption-container"></div>
				</div>
			</div>
			<div class="span6">
				<div id="controls" class="controls"></div>
				<div id="thumbs" class="navigation">
					<ul class="thumbs noscript">
						{% for image in images %}
						<li>
							<a class="thumb" name="leaf" href="{{url_for('static', filename=image.imagepath)}}" title="{{image.imagename}}">
								<img src="{{url_for('static', filename=image.imagepath)}}" alt="{{image.imagename}}" />
							</a>
							<div class="caption">
								
								<div class="image-title">{{image.imagename}}</div>
								<!--<div class="image-desc">Description</div>!-->
							</div>
						</li>
						{% endfor %}
						<li>
							<a class="thumb" name="leaf" href="http://farm4.static.flickr.com/3261/2538183196_8baf9a8015.jpg" title="Title #0">
								<img src="http://farm4.static.flickr.com/3261/2538183196_8baf9a8015_s.jpg" alt="Title #0" />
							</a>
							<div class="caption">
								
								<div class="image-title">Title #0</div>
								<div class="image-desc">Description</div>
							</div>
						</li>
						
					</ul>
				</div>
			</div>
			</div>

</div>
	
	<div class="row-fluid springDesc contrast" style="position:relative">
		
		
		<div class="span6" style="padding-right:10px">
		<h3>Details</h3>
		<p>{{sample_site.desc}}</p>
		</div>
			

		
		
		<div class="span6" style="">		
		
			
				<h4>Location </h4>
				<p> {{sample_site.city}} </p>
				<h4>Temperature </h4>
				<p> {{sample_site.temp}} </p>
				<div>
					{% if sample_site.toilet %}
							<i rel="tooltip" data-original-title="Trash cans available" class="icon-trash" style="margin:0 2px;"></i>
						{% endif %}
						{% if sample_site.track %}
							<i rel="tooltip" data-original-title="Walking track available" class="icon-road" style="margin:0 2px;"></i>
						{% endif %}
						{% if sample_site.parkbench %}
							<i rel="tooltip" data-original-title="Park benches available" class="icon-hdd" style="margin:0 2px;"></i>
						{% endif %}
						{% if sample_site.private %}
							<i rel="tooltip" data-original-title="Private Property" class="icon-warning-sign" style="margin:0 2px;"></i>
						{% endif %}
				</div>				
			
		
		</div>



		
	</div>
		<div style="height:5px;position:relative;background-color:rgb(255,255,255)"></div>
			<div id="show_map"></div>
			<a class="btn" onclick="history.back()" style="display:inline">Back</a>

			<a href="#myModal" role="button" class="btn" data-toggle="modal" style="float:right;" id="loginButton">Advanced</a>
		
		
{% if session.logged_in %}
	<div id="advanced">
		<H1> HEY THERE! YOU CAN SEE ME BECAUSE YOU ARE LOGGED IN, GOOD FOR YOU! </h1>
	</div>
{% endif %}




	<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				  <!--<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
					<h3 id="myModalLabel">Modal header</h3>
				  </div>!-->
				  <div class="modal-body">
					<div class="container">
							<div class="logincontent" >
							
									<div class="login-form">
										<h2>Login</h2>
										<form action="{{url_for('login')}}" method="post">
											<fieldset>							
													<input type="text" placeholder="Username" name="username" style="display:block" id="usernameTextbox">					
												
													<input type="password" placeholder="Password" name="password" style="display:block">
													<input type="hidden" name="site_id" value="{{sample_site.location_id}}">	

													<button class="btn btn-primary" type="submit">Login</button>
											</fieldset>

										</form>

											{% if error%}						
											<div class="alert" id="alert">
												<button type="button" class="close" data-dismiss="alert">&times;</button>
												<p id="alertMessage"> {{error}} </p>
											</div>
											{% endif %}

									</div>
								
							</div>
						</div>
				  </div>
				<!--  <div class="modal-footer">
				  	
					<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
				  </div> !-->
				</div>



<script type="text/javascript">
		
 jQuery(document).ready(function($) {
				// We only want these styles applied when javascript is enabled
				$('div.navigation').css({'width' : '300px', 'float' : 'left'});
				$('div.content').css('display', 'block');

				// Initially set opacity on thumbs and add
				// additional styling for hover effect on thumbs
				var onMouseOutOpacity = 0.67;
				$('#thumbs ul.thumbs li').opacityrollover({
					mouseOutOpacity:   onMouseOutOpacity,
					mouseOverOpacity:  1.0,
					fadeSpeed:         'fast',
					exemptionSelector: '.selected'
				});
				
				// Initialize Advanced Galleriffic Gallery
				var gallery = $('#thumbs').galleriffic({
					delay:                     2500,
					numThumbs:                 15,
					preloadAhead:              10,
					enableTopPager:            true,
					enableBottomPager:         true,
					maxPagesToShow:            7,
					imageContainerSel:         '#slideshow',
					controlsContainerSel:      '#controls',
					captionContainerSel:       '#caption',
					loadingContainerSel:       '#loading',
					renderSSControls:          true,
					renderNavControls:         true,
					playLinkText:              'Play Slideshow',
					pauseLinkText:             'Pause Slideshow',
					prevLinkText:              '&lsaquo; Previous Photo',
					nextLinkText:              'Next Photo &rsaquo;',
					nextPageLinkText:          'Next &rsaquo;',
					prevPageLinkText:          '&lsaquo; Prev',
					enableHistory:             false,
					autoStart:                 false,
					syncTransitions:           true,
					defaultTransitionDuration: 900,
					onSlideChange:             function(prevIndex, nextIndex) {
						// 'this' refers to the gallery, which is an extension of $('#thumbs')
						this.find('ul.thumbs').children()
							.eq(prevIndex).fadeTo('fast', onMouseOutOpacity).end()
							.eq(nextIndex).fadeTo('fast', 1.0);
					},
					onPageTransitionOut:       function(callback) {
						this.fadeTo('fast', 0.0, callback);
					},
					onPageTransitionIn:        function() {
						this.fadeTo('fast', 1.0);
					}
				});
			});

</script>
{% endblock %}